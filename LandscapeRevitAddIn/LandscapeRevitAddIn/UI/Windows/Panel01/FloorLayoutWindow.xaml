<Window x:Class="LandscapeRevitAddIn.UI.Windows.Panel01.FloorLayoutWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="XD Landscape  - Floor Layout" Height="800" Width="800"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        Background="White"
        WindowStyle="SingleBorderWindow">

	<Window.Resources>
		<!-- Logo-Inspired Gradient Background -->
		<LinearGradientBrush x:Key="LogoGradientBackground" StartPoint="0,0" EndPoint="1,1">
			<GradientStop Color="#B8D4C0" Offset="0"/>
			<GradientStop Color="#A8C9B3" Offset="0.3"/>
			<GradientStop Color="#8FBB9A" Offset="0.6"/>
			<GradientStop Color="#7AAE85" Offset="0.8"/>
			<GradientStop Color="#6BA177" Offset="1"/>
		</LinearGradientBrush>

		<!-- Subtle Card Background with slight transparency to show gradient -->
		<SolidColorBrush x:Key="CardBackground" Color="#FEFEFE" Opacity="0.95"/>

		<!-- Modern Button Style -->
		<Style x:Key="ModernButton" TargetType="Button">
			<Setter Property="Background" Value="#4A7C5A"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="BorderBrush" Value="#3D6349"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Padding" Value="12,8"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="FontSize" Value="11"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
							<ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="#5A8C6A"/>
				</Trigger>
				<Trigger Property="IsPressed" Value="True">
					<Setter Property="Background" Value="#3A5C45"/>
				</Trigger>
				<Trigger Property="IsEnabled" Value="False">
					<Setter Property="Background" Value="#CCCCCC"/>
					<Setter Property="Foreground" Value="#666666"/>
					<Setter Property="Cursor" Value="Arrow"/>
				</Trigger>
			</Style.Triggers>
		</Style>

		<!-- Primary Action Button -->
		<Style x:Key="PrimaryButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
			<Setter Property="Background" Value="#2D5D3A"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="FontSize" Value="12"/>
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="#4A7C5A"/>
				</Trigger>
				<Trigger Property="IsEnabled" Value="False">
					<Setter Property="Background" Value="#CCCCCC"/>
					<Setter Property="Foreground" Value="#666666"/>
				</Trigger>
			</Style.Triggers>
		</Style>

		<!-- Modern ComboBox Style with Green Accents -->
		<Style x:Key="ModernComboBox" TargetType="ComboBox">
			<Setter Property="Background" Value="White"/>
			<Setter Property="BorderBrush" Value="#A8C9B3"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Padding" Value="12,10"/>
			<Setter Property="FontSize" Value="12"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="ComboBox">
						<Grid>
							<Border Name="Border"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="4"/>
							<ToggleButton Name="ToggleButton"
                                        Grid.Column="2"
                                        Focusable="false"
                                        IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}"
                                        ClickMode="Press"
                                        Background="Transparent"
                                        BorderThickness="0">
								<Path Name="Arrow"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"
                                      Data="M 0 0 L 4 4 L 8 0 Z"
                                      Fill="#4A7C5A" />
							</ToggleButton>
							<ContentPresenter Name="ContentSite"
                                            IsHitTestVisible="False"
                                            Content="{TemplateBinding SelectionBoxItem}"
                                            ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                            ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                            Margin="12,0,30,0"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Left" />
							<Popup Name="Popup"
                                   Placement="Bottom"
                                   IsOpen="{TemplateBinding IsDropDownOpen}"
                                   AllowsTransparency="True"
                                   Focusable="False"
                                   PopupAnimation="Slide">
								<Grid Name="DropDown"
                                      SnapsToDevicePixels="True"
                                      MinWidth="{TemplateBinding ActualWidth}"
                                      MaxHeight="{TemplateBinding MaxDropDownHeight}">
									<Border Name="DropDownBorder"
                                            Background="White"
                                            BorderThickness="1"
                                            BorderBrush="#A8C9B3"
                                            CornerRadius="4"/>
									<ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True">
										<StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
									</ScrollViewer>
								</Grid>
							</Popup>
						</Grid>
						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="Border" Property="BorderBrush" Value="#4A7C5A"/>
							</Trigger>
							<Trigger Property="IsFocused" Value="True">
								<Setter TargetName="Border" Property="BorderBrush" Value="#2D5D3A"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
			<Setter Property="ItemContainerStyle">
				<Setter.Value>
					<Style TargetType="ComboBoxItem">
						<Setter Property="Padding" Value="12,8"/>
						<Setter Property="FontSize" Value="12"/>
						<Setter Property="MinHeight" Value="32"/>
						<Setter Property="Background" Value="Transparent"/>
						<Style.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter Property="Background" Value="#E8F4EB"/>
							</Trigger>
							<Trigger Property="IsSelected" Value="True">
								<Setter Property="Background" Value="#D4E8D8"/>
								<Setter Property="FontWeight" Value="SemiBold"/>
							</Trigger>
						</Style.Triggers>
					</Style>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- Updated Card Style with subtle transparency -->
		<Style x:Key="Card" TargetType="Border">
			<Setter Property="Background" Value="{StaticResource CardBackground}"/>
			<Setter Property="BorderBrush" Value="#C8DDD0"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="CornerRadius" Value="8"/>
			<Setter Property="Padding" Value="20"/>
			<Setter Property="Effect">
				<Setter.Value>
					<DropShadowEffect ShadowDepth="2" BlurRadius="8" Opacity="0.15" Color="#4A7C5A"/>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- Layer Mapping Row Style -->
		<Style x:Key="MappingRowBorder" TargetType="Border">
			<Setter Property="BorderBrush" Value="#C8DDD0"/>
			<Setter Property="BorderThickness" Value="1,0,0,1"/>
			<Setter Property="Padding" Value="0"/>
			<Style.Triggers>
				<DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Grid}, Path=Tag}" Value="Even">
					<Setter Property="Background" Value="White"/>
				</DataTrigger>
				<DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Grid}, Path=Tag}" Value="Odd">
					<Setter Property="Background" Value="#F8FBF9"/>
				</DataTrigger>
			</Style.Triggers>
		</Style>

		<!-- Status Text Styles with Green Theme -->
		<Style x:Key="SuccessText" TargetType="TextBlock">
			<Setter Property="Foreground" Value="#2D5D3A"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
		</Style>

		<Style x:Key="ErrorText" TargetType="TextBlock">
			<Setter Property="Foreground" Value="#C85450"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
		</Style>

		<Style x:Key="InfoText" TargetType="TextBlock">
			<Setter Property="Foreground" Value="#5A8C6A"/>
			<Setter Property="FontStyle" Value="Italic"/>
		</Style>
	</Window.Resources>

	<Grid Background="{StaticResource LogoGradientBackground}">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Header with Logo -->
		<Border Grid.Row="0" Style="{StaticResource Card}" Margin="20,20,20,10">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="*"/>
				</Grid.ColumnDefinitions>

				<!-- Logo (Square, No Rounded Corners, 20% Larger) -->
				<Border Grid.Column="0" Width="72" Height="72"
                        VerticalAlignment="Center" Margin="0,0,20,0">
					<Border.Background>
						<ImageBrush x:Name="LogoBrush" Stretch="Uniform"/>
					</Border.Background>
				</Border>

				<!-- Title and Info -->
				<StackPanel Grid.Column="1" VerticalAlignment="Center">
					<TextBlock Text="XD Landscape"
                               FontSize="24" FontWeight="Bold" Foreground="#2D5D3A"
                               Margin="0,0,0,5"/>
					<TextBlock Text="Create Floors from CAD Boundaries"
                               FontSize="14" Foreground="#4A7C5A"/>
					<TextBlock Text="Automatically generate floor elements from CAD layer boundaries and polylines"
                               FontSize="11" Foreground="#5A8C6A" Margin="0,2,0,0"/>
				</StackPanel>
			</Grid>
		</Border>

		<!-- CAD File Selection -->
		<Border Grid.Row="1" Style="{StaticResource Card}" Margin="20,10,20,10">
			<StackPanel>
				<Grid Margin="0,0,0,15">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto"/>
					</Grid.ColumnDefinitions>

					<TextBlock Grid.Column="0" Text="CAD File Selection"
                               FontSize="16" FontWeight="SemiBold" Foreground="#2D5D3A"
                               VerticalAlignment="Center"/>

					<TextBlock Grid.Column="1" Text="Select linked CAD file"
                               FontSize="11" Foreground="#5A8C6A"
                               VerticalAlignment="Center" FontStyle="Italic"/>
				</Grid>

				<ComboBox Name="CADFileComboBox"
                          Style="{StaticResource ModernComboBox}" Height="40"
                          SelectionChanged="CADFileComboBox_SelectionChanged">
					<ComboBox.ItemTemplate>
						<DataTemplate>
							<StackPanel Orientation="Horizontal">
								<TextBlock Text="📁" FontSize="14" Margin="0,0,8,0" VerticalAlignment="Center"/>
								<TextBlock Text="{Binding}" FontSize="12" VerticalAlignment="Center"/>
							</StackPanel>
						</DataTemplate>
					</ComboBox.ItemTemplate>
				</ComboBox>

				<TextBlock Name="CADInfoTextBlock" Margin="0,12,0,0"
                           Text="Select a linked CAD file to view available layers"
                           Style="{StaticResource InfoText}"/>
			</StackPanel>
		</Border>

		<!-- Main Content Area -->
		<Border Grid.Row="2" Style="{StaticResource Card}" Margin="20,10,20,10">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*" MinHeight="140"/>
					<RowDefinition Height="Auto"/>
				</Grid.RowDefinitions>

				<!-- Section Title -->
				<Grid Grid.Row="0" Margin="0,0,0,15">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto"/>
					</Grid.ColumnDefinitions>

					<TextBlock Grid.Column="0" Text="Layer to Floor Type Mapping"
                               FontSize="16" FontWeight="SemiBold" Foreground="#2D5D3A"
                               VerticalAlignment="Center"/>

					<TextBlock Grid.Column="1" Text="Map CAD layers to Revit floor types"
                               FontSize="11" Foreground="#5A8C6A"
                               VerticalAlignment="Center" FontStyle="Italic"/>
				</Grid>

				<!-- Table Header -->
				<Grid Grid.Row="1" Margin="0,0,0,0">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="2*"/>
						<ColumnDefinition Width="2*"/>
						<ColumnDefinition Width="80"/>
					</Grid.ColumnDefinitions>

					<Border Grid.Column="0" Background="#E8F4EB"
                            BorderBrush="#C8DDD0" BorderThickness="1,1,0,1"
                            CornerRadius="6,0,0,0" Padding="15,12">
						<TextBlock Text="CAD Layer" FontWeight="SemiBold" FontSize="12"
                                   Foreground="#2D5D3A" HorizontalAlignment="Left"/>
					</Border>

					<Border Grid.Column="1" Background="#E8F4EB"
                            BorderBrush="#C8DDD0" BorderThickness="1,1,0,1"
                            Padding="15,12">
						<TextBlock Text="Floor Type" FontWeight="SemiBold" FontSize="12"
                                   Foreground="#2D5D3A" HorizontalAlignment="Left"/>
					</Border>

					<Border Grid.Column="2" Background="#E8F4EB"
                            BorderBrush="#C8DDD0" BorderThickness="1"
                            CornerRadius="0,6,0,0" Padding="8,12">
						<TextBlock Text="Remove" FontWeight="SemiBold" FontSize="12"
                                   Foreground="#2D5D3A" HorizontalAlignment="Center"/>
					</Border>
				</Grid>

				<!-- Mapping Rows Container -->
				<ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled"
                              BorderBrush="#C8DDD0" BorderThickness="1,0,1,1"
                              Background="White" MinHeight="140">
					<StackPanel Name="MappingRowsPanel">
						<!-- Mapping rows will be added here dynamically -->
						<Border Padding="40,60" Background="White">
							<StackPanel HorizontalAlignment="Center">
								<TextBlock Text="🏗️ Select CAD File to Begin"
                                           Foreground="#A8C9B3" FontSize="16"
                                           HorizontalAlignment="Center" Margin="0,0,0,8"
                                           FontWeight="SemiBold"/>
								<TextBlock Text="Choose a linked CAD file to view and map its layers to floor types"
                                           Foreground="#7AAE85" FontStyle="Italic"
                                           HorizontalAlignment="Center" FontSize="12"/>
							</StackPanel>
						</Border>
					</StackPanel>
				</ScrollViewer>

				<!-- Add Row Button -->
				<Button Grid.Row="3" Name="AddRowButton"
                        Content="➕ Add Layer Mapping"
                        Style="{StaticResource ModernButton}"
                        Height="42" Margin="0,15,0,0"
                        Click="AddRowButton_Click" IsEnabled="False"/>
			</Grid>
		</Border>

		<!-- Footer with Summary and Actions -->
		<Border Grid.Row="3" Style="{StaticResource Card}" Margin="20,10,20,20">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>

				<!-- Summary -->
				<StackPanel Grid.Column="0" VerticalAlignment="Center">
					<TextBlock Name="SummaryTextBlock"
                               FontWeight="SemiBold" FontSize="14" Foreground="#2D5D3A"
                               Text="Configure layer mappings to continue"/>
					<TextBlock Text="Select CAD layers and assign floor types to create floors automatically"
                               FontSize="11" Foreground="#4A7C5A" Margin="0,2,0,0"/>
				</StackPanel>

				<!-- Action Buttons -->
				<StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
					<Button Name="CancelButton" Content="Cancel"
                            Style="{StaticResource ModernButton}"
                            Width="90" Height="38" Margin="0,0,12,0"
                            Click="CancelButton_Click"/>

					<Button Name="CreateFloorsButton" Content="🏗️ Create Floors"
                            Style="{StaticResource PrimaryButton}"
                            Width="140" Height="38"
                            Click="CreateFloorsButton_Click" IsEnabled="False"/>
				</StackPanel>
			</Grid>
		</Border>
	</Grid>
</Window>